### Usando JOINS

- permite unir 2 o mas tablas usando un campo comun.

#### INNER JOIN
- Devuelve unicamente los registros con llaves correspondientes

![Inner Join Ejemplo](/imagenes/inner_join_1.png)

![Inner Join Resultado](/imagenes/inner_join_resultado.png)


#### FULL JOIN
- Mantiene y devuelve todos los registros de las tablas
- lo que no corresponda envia NULL

![Inner Join Ejemplo](/imagenes/inner_join_1.png)

![Resultados Full Join](/imagenes/resultados_full_join.png)


#### LEFT JOIN
- mantiene todos los registros de la tabla de la izquierda y devuelve unicamente los correspondientes de la tabla de la derecha.
- En los que no correspoda devuelve NULL

![Inner Join Ejemplo](/imagenes/inner_join_1.png)

![Resultado Left Join](/imagenes/resultado_left_join.png)

#### RIGHT JOIN
- Mantiene todos los registros de la tabal derecha y devuelve unicamente los correspondientes de la tabla izquierda
- en los que no corresponda devuelve NULL

![Inner Join Ejemplo](/imagenes/inner_join_1.png)

![Resultado Rigth Join](/imagenes/resultado_right_join.png)

#### CROSS JOIN
- Devuelve el producto cartesiano de los resgitros de las tablas
- al multiplicar por ejemplo da 36 registros

![Inner Join Ejemplo](/imagenes/inner_join_1.png)

![Resultado Cross Join](/imagenes/resultado_cross_join.png)


Ejemplos de la BD Jugos:

```sql
    SELECT
		A.NOMBRE,
        B.MATRICULA,
        COUNT(*)
    FROM
            tabla_de_vendedores AS A
    INNER JOIN
            facturas AS B
            ON A.MATRICULA=B.MATRICULA
    GROUP BY A.NOMBRE, B.MATRICULA

```

![Jugos ejemplo](/imagenes/jugos_ejemplo_1.png)

#### USANDO LEFT JOIN Y RIGHT JOIN

- Para la BD de jugos, por ejemplo obtener los clientes que no han comprado ningun jugo, solo aparecen registrados.

```sql
    -- Para la BD de jugos, 
    -- por ejemplo obtener los clientes que no han comprado ningun jugo, 
    -- solo aparecen registrados.
    SELECT 	DISTINCT
            C.DNI,
            C.NOMBRE,
            F.NUMERO,
            C.CIUDAD
    FROM 
            credicel_alura_bd.tabla_de_clientes AS C
    LEFT JOIN
            facturas AS F
            ON C.DNI=F.DNI
    GROUP BY DNI;
```

![Jugos clientes sin compras](/imagenes/clientes_sin_comprar_jugo.png)


```sql
    -- Para la BD de jugos, 
    -- por ejemplo obtener los clientes que no han comprado ningun jugo, 
    -- solo aparecen registrados.
    -- DEVUELVE SOLO LOS QUE NO HAN COMPRADO
    SELECT DISTINCT
            C.DNI,
            C.NOMBRE,
            F.NUMERO,
            C.CIUDAD
    FROM 
            credicel_alura_bd.tabla_de_clientes AS C
    LEFT JOIN
            facturas AS F
            ON C.DNI=F.DNI
    GROUP BY DNI
    WHERE C.DNI IS NULL;
```

OTRA FORMA Y TAMBIEN SE PUEDE CON RIGHT JOIN:

```sql
    -- Para la BD de jugos, 
    -- por ejemplo obtener los clientes que no han comprado ningun jugo, 
    -- solo aparecen registrados.
    SELECT DISTINCT
            C.DNI,
            C.NOMBRE,
            F.NUMERO,
            C.CIUDAD
    FROM 
            credicel_alura_bd.tabla_de_clientes AS C
    LEFT JOIN
            facturas AS F
            ON C.DNI=F.DNI
    WHERE F.DNI IS NULL
    GROUP BY DNI;
```

![Jugos clientes sin comprar 2](/imagenes/clientes_sin_comprar_2.png)


#### FULL Y CROSS JOIN

- mariaDB no soporta FULL JOIN, para hacerlo tendría que hacer un left join con UNION a un right join.
- 
-

```sql
        SELECT	c.NOMBRE as cliente,
                        c.ciudad as ciudad,
                        c.BARRIO as barrio,
                v.NOMBRE as vendedor,
                v.BARRIO as barrio_v
        FROM
                        credicel_alura_bd.tabla_de_clientes as c
        JOIN credicel_alura_bd.tabla_de_vendedores AS v
                        ON c.BARRIO=v.BARRIO;
```

![join ejemplo](/imagenes/join_ejemplo.png)

el cross:


```sql
        -- uso del cross join
        SELECT	c.NOMBRE as cliente,
                c.ciudad as ciudad,
                c.BARRIO as barrio,
                v.NOMBRE as vendedor,
                v.BARRIO as barrio_v,
                v.VACACIONES as vacaciones
        FROM    credicel_alura_bd.tabla_de_clientes as c,
                credicel_alura_bd.tabla_de_vendedores AS v
        WHERE 	c.BARRIO=v.BARRIO                    
```

![Ejemplo Cross Join](/imagenes/cross_join_en_jugos.png)

```sql
        -- uso del cross join multiplicacion cartesiana sin el where
        SELECT	c.NOMBRE as cliente,
                c.ciudad as ciudad,
                c.BARRIO as barrio,
                v.NOMBRE as vendedor,
                v.BARRIO as barrio_v,
                v.VACACIONES as vacaciones
        FROM    credicel_alura_bd.tabla_de_clientes as c,
                credicel_alura_bd.tabla_de_vendedores AS v                    
```


#### Uso del UNION

- permite unir 2 o mas tablas (implícitamente ejecuta con DISTINCT)
- El numero de campos en las tablas debe ser igual (mismos campos y mimos tipos)

![Estructura Union](/imagenes/estructura_join.png)

Resultado: futbol no se repite

![Resultado Union](/imagenes/resultado_union.png)

#### Uso del UNION ALL

- permite unir 2 o mas tablas
- El numero de campos en las tablas debe ser igual (mismos campos y mimos tipos)
- devuelve todos los datos inclusive si se repiten
- toma siempre los nombres del primer select (de las columnas, si en el segundo se coloca otro tipo no lo toma en cuenta)
- Respuesta a ¿un ejemplo de uso de union? de luri: "..Imagina que tienes dos tablas, una con información de clientes y otra con información de empleados. Ambas tablas tienen una columna llamada "Ciudad". Si quieres obtener una lista de todas las ciudades donde viven tus clientes y empleados, puedes usar UNION.."

![Estructura Union All](/imagenes/union_all.png)

![Resultado Union ALL](/imagenes/union_all_resultado.png)


##### Ejemplos en la BD Jugos

- con el UNION ALL los datos repetidos se muestran

```sql
        SELECT DISTINCT BARRIO FROM credicel_alura_bd.tabla_de_clientes
        UNION
        SELECT DISTINCT BARRIO FROM credicel_alura_bd.tabla_de_vendedores;
```

![Resultado union en jugos](/imagenes/resultado_union_jugos.png)

Ejemplo u-1: listado de barrios con el nombre del cliente o vendedor.

```sql
        SELECT 	BARRIO, 
                        NOMBRE, 
                'Cliente' as Tipo 
                FROM credicel_alura_bd.tabla_de_clientes
        UNION
        SELECT 	BARRIO, 
                        NOMBRE, 
                'Vendedor' as Tipo
                FROM credicel_alura_bd.tabla_de_vendedores;
```

![Ejemplo U 1](/imagenes/ejemplo_u_1.png)


Ejemplo u-2: listado de barrios con el nombre del cliente o vendedor, y su dni o matricula.
- como el dni es varchar y matricula tambien es varchar, sin importar la longitud entonces si se puede

```sql
        SELECT 	DISTINCT BARRIO, 
                        NOMBRE, 
                'Cliente' as Tipo,
                dni as documento
                FROM credicel_alura_bd.tabla_de_clientes
        UNION
        SELECT  DISTINCT BARRIO, 
                        NOMBRE, 
                'Vendedor' as Tipo,
                MATRICULA
                FROM credicel_alura_bd.tabla_de_vendedores;
```

![Ejemplo U 2](/imagenes/ejemplo_u_2.png)


Ejemplo u-3: Realizar un FULL JOIN con UNION

```sql
        SELECT	c.NOMBRE as cliente,
                        c.ciudad as ciudad,
                        c.BARRIO as barrio,
                v.NOMBRE as vendedor,
                v.BARRIO as barrio_v
        FROM
                        credicel_alura_bd.tabla_de_clientes as c
        LEFT JOIN credicel_alura_bd.tabla_de_vendedores AS v
                        ON c.BARRIO=v.BARRIO
        -- ***
        UNION
        -- **       
        SELECT	c.NOMBRE as cliente,
                        c.ciudad as ciudad,
                        c.BARRIO as barrio,
                v.NOMBRE as vendedor,
                v.BARRIO as barrio_v
        FROM
                        credicel_alura_bd.tabla_de_clientes as c
        RIGHT JOIN credicel_alura_bd.tabla_de_vendedores AS v
                        ON c.BARRIO=v.BARRIO;
```

![Ejemplo U 3](/imagenes/ejemplo_u_3.png)


### SUBCONSULTAS

- Permite realizar una consulta dentro de otra consulta
- 

![Subconsulta 1](/imagenes/subconsulta_1.png)


![Subconsulta 2](/imagenes/subconsulta_2.png)

#### Ejemplos BD Jugos:

