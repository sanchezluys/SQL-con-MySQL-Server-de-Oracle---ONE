## Proyectando la Base de Datos

![Diagrama Proyecto](/imagenes/clase01/diagrama_proyecto.png)

Repositorio:

https://github.com/alura-es-cursos/1834-proyecto-final-sql-con-mysql

Pasos:

- Instalacion del IDE y MySQL
- Descargar de la pagina oficial
- Se activan los servicios
- Se define usuario y clave de root
- La nueva base de datos se va a llamar empresa, que es la misma de los jugos


![Diagrama 2](/imagenes/clase01/diagrama_2.png)

### Creacion de la Base de datos

- Se llamará **Empresa**
- Se configura la codificacion con UTF8 y utf8mb3_spanish_ci
- En mysql crear una base de datos o esquema es lo mismo
- Se crea la tabla clientes
- Se crea la tabla vendedores
- Se crea la tabla de productos
- Se crea la tabla facturas
- Se crea la tabla itmes
- Se genera el diagrama entidad relacion con el asistente de mysql

### Cargar datos en la BD

- Usando el archivo en recursos: carga_tablas_registros.sql, cargar ese sql y ejecutarlo
- Se puede insertar datos de 2 formas:
  - 1. INSERT INTO table_name (field_name) VALUES (values); 
  - 2. INSERT table_name (field_name) VALUES (values);
- Se insertan los datos en la tabla clientes
- Se insertan los datos en la tabla productos
- Se insertan los datos en la tabla vendedores
- Se insertan los datos en la tabla items
- Se insertan los datos en la tabla facturas 

![Diagrama Entidad Relacion Generado por Workbench](/imagenes/clase01/diagrama_erd_por_workbench.png)

### Trasladando datos de una base de datos a otra

- se van a traer los datos de la bd de jugos a la nueva empresa, los datos de facturas e items
- lo único que se requiere es que el número de campos en la cláusula INSERT corresponda con el número de campos en la cláusula SELECT.

Para las facturas:

```sql
  USE credicel_empresa;
  -- para poder trasladar los datos de una bd a la otra se puede con un insert
  -- pero debo primero organizar el query para que traiga los datos en el mismo orden 
  -- que tiene la tabla donde van a llegar los datos
  INSERT facturas
  SELECT 	NUMERO,
          FECHA_VENTA AS FECHA,
          DNI,
          MATRICULA,
          IMPUESTO
  FROM credicel_alura_bd.facturas;
```
Para los items

```sql
  USE credicel_empresa;
  -- para poder trasladar los datos de una bd a la otra se puede con un insert
  -- pero debo primero organizar el query para que traiga los datos en el mismo orden 
  -- que tiene la tabla donde van a llegar los datos
  INSERT items
  SELECT 	NUMERO,
          CODIGO_DEL_PRODUCTO AS CODIGO,
          CANTIDAD,
          PRECIO
  FROM credicel_alura_bd.items_facturas;
```

Luego para verificar se hace un query para ver los datos de ambas tablas

```sql
  -- listados de facturas e items
  SELECT * 
  FROM credicel_empresa.facturas F
  JOIN items I ON F.NUMERO=I.NUMERO
```
