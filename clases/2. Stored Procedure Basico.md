## Conceptos Basicos

- programas estructurados
- no cumplen con ansi
- Todos los comandos deben terminar con ;
- En mysql por defecto el delimitador coloca $$ pero puede ser // o %% etc.

### Sintaxis para un Procedimiento

- Debe tener letras, numeros, $, '_'
- Tama침o maximo 64 caracteres
- El nombre debe ser unico
- Es Case Sensitive
- se llama con el comndo CALL procedimiento;
- se pueden agregar comentarios con /* comentarios  */
- tambien acepta comentarios con -- comentario
- tambien acepta comentarios con # comentarios
- No existe un comando para alterar un Stored Procedure, su cuerpo y sus par치metros. Para ello, tenemos que borrarlo con el comando DROP y crearlo de nuevo.
- **OJO** una vez creado el procedimiento no se puede cambiar ni los parametros ni el cuerpo, es necesario borrarlo y crearlo de nuevo.

```sql
    -- sintaxis basica
    CREATE PROCEDURE NOMBRE_PROCEDIMIENTO
        BEGIN
            DECLARE VARIABLE;
            -- CODIGO

        END;
```

Un procedimiento con el asistente, esta en blanco:

```sql
    USE `credicel_alura_bd`;
    DROP procedure IF EXISTS `new_procedure`;

    DELIMITER $$
        USE `credicel_alura_bd`$$
        CREATE PROCEDURE `new_procedure` ()
        BEGIN
            DECLARE VAR INT;
        END$$

    DELIMITER ;
```

hola mundo:

```sql
    CREATE DEFINER=`credicel_alura_portatil`@`%` PROCEDURE `hola`()
        BEGIN
            DECLARE VAR INT;
            select 'hola mundo';
        END
```

Con comentarios:

```sql
    CREATE DEFINER=`credicel_alura_portatil`@`%` PROCEDURE `hola`()
    BEGIN
        DECLARE VAR INT;
        /* comentario de lineas
            linea 2
            linea 3 
        */
        select 'hola mundo' as mensaje;
        -- otro comentario
        # otro comentario
    END
```


### Alterando y excluyendo procedimientos

- Se puede borrar con el asistente con DROP
- Se puede editar con boton derecho sobre el procedimiento->Alter stored procedure

### Declarando Variables

- con DECLARE VARIABLE DATATYPE DEFAULT VALUE
- DATATIPE es obligatorio
- debe tener letras, numeros $, _ y se pueden declarar varias en una misma linea siempre y cuando sean de igual tipo
- tama침o maximo 255 caracteres
- Su nombre debe ser unico, es Case Sensitive
- La linea de declaracion termina con ;
- Si no tiene default su valor ser치 **null**
- Con SET variable=valor; le puedo asignar valores desdpues de haber sido declarada.
- Tipos:
    - Varchar()
    - Integer
    - Decimal(p,s) p:digitos, s: decimales
    - Date
    - Timestamp

```sql
    USE `credicel_alura_bd`;
    DROP procedure IF EXISTS `ver_variables`;

    USE `credicel_alura_bd`;
    DROP procedure IF EXISTS `credicel_alura_bd`.`ver_variables`;

    DELIMITER $$
        USE `credicel_alura_bd`$$
        CREATE DEFINER=`credicel_alura_portatil`@`%` PROCEDURE `ver_variables`()
        BEGIN
            DECLARE NOMBRE VARCHAR(20) DEFAULT "hola desde variable";
            DECLARE NUMERO INTEGER DEFAULT 452;
            DECLARE NUM_DECIMAL DECIMAL(5,2) DEFAULT 89.32;
            DECLARE FECHA DATE DEFAULT "2024-02-01";
            DECLARE TIEMPO_FECHA TIMESTAMP DEFAULT CURRENT_TIMESTAMP();
            -- MOSTRAR LAS VARIABLES
            SELECT  NOMBRE AS CARACTERES,
                    NUMERO AS NUMERO,
                    NUM_DECIMAL AS NUMERO_DECIMAL,
                    FECHA AS FECHA,
                    TIEMPO_FECHA AS TIEMPO_ACTUAL;
            SET     NOMBRE="NUEVO VALOR";
            SELECT  NOMBRE AS REASIGNANDO_VALOR;
        END$$
    DELIMITER ;
```
