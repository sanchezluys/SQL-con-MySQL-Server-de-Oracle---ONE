## Gestion de Usuarios

### Creando un administrador

- Cuando se instala mysql se crea con un usuario root,
- pero no deberia mantenerse por lo que se recomienda crear un administrador y eliminar la clave root
- El usuario tipo DBA es el que tiene mas privilegios
- Se configura con:
    - login name: admin01
    - authentication type: standard
    - limit host matching: % | localhost : % es que se puede conectar de cualquier ip, y localhost solo desde el mismo server
    - password: password
    - confirm password: password
  - En la segunda pestaña accounts limits
    - se deja en 0 para que no tenga limites el usuario
    - 

![admin privilegios](/imagenes/clase04/admin_privilegios.png)

![configura_usuario_1](/imagenes/clase04/configura_user_1.png)

![configura usuario 2](/imagenes/clase04/configura_user_2.png)

roles administrativos:
![roles administrativos](/imagenes/clase04/roles_administrativos.png)

DBA:
![roles dba](/imagenes/clase04/roles_dba.png)

```sql
    -- CREAR EL USUARIO
   CREATE USER 'ADMIN02'@'LOCALHOST' IDENTIFIED BY 'ADMIN02';

   -- HABILITAR PRIVILEGIOS
   GRANT ALL PRIVILEGES ON *.* TO 'ADMIN02'@'LOCALHOST' WITH GRANT OPTION;
```


### Creando un usuario Normal

- usuarios que por ejemplo no puedan borrar
- Por ejemplo habilitar:
  - SELECT
  - UPDATE
  - INSERT
  - DELETE
  - EXECUTE : PARA PODER EJECUTAR LOS PROCEDIMIENTOS
  - LOCK TABLE : POR FUNCIONES O PROCEDIMIENTOS QUE REQUIEREN BLOQUEO TEMPORAL DE LA TABLA
  - CREATE TEMPORARY TABLES

```sql
    -- CREAR EL USUARIO
   CREATE USER 'USER02'@'LOCALHOST' IDENTIFIED BY 'USER02';

   -- HABILITAR PRIVILEGIOS
   GRANT    SELECT, 
            UPDATE,
            DELETE, 
            CREATE TEMPORARY TABLES,
            LOCK TABLES,
            EXECUTE
   ON *.* TO 'USER02'@'LOCALHOST';
```

### Usuario que solo lee datos
- usuarios que generan informes
- no necesitan escribir datos, solo leer o ejecutar procedimientos o funciones para leer datos
- Es importante estar seguros que los procedimientos y funciones solo lean datos, ya que si deben escribir o actualizar algun registro se generará el procedmiento aunque solo tenga permisos de solo lectura.
- EXECUTE debe ser revisado por el DBA antes de habilitarlo a un usuario

```sql
    -- CREAR EL USUARIO
   CREATE USER 'READ01'@'LOCALHOST' IDENTIFIED BY 'READ01';

   -- HABILITAR PRIVILEGIOS
   GRANT    SELECT, 
            EXECUTE
   ON *.* TO 'READ01'@'LOCALHOST';
```

- Al habilitar los privilegios de READ y EXECUTE al usuario de lectura, ¿Qué sucede cuando este ejecuta un Stored Procedure que realiza mantenimiento en las tablas?

R: El Stored Procedure será ejecutado normalmente, aunque el usuario tenga solamente la propiedad READ para las tablas.

¡Alternativa correcta! **Esta es una característica peligrosa**, porque a pesar de que el usuario no tenga los privilegios de INSERT, UPDATE y DELETE, los comandos que realizan estas ejecuciones en la tabla, que se encuentran al interior del Stored Procedure, serán ejecutados, porque la característica EXECUTE se sobrepone a los mismos.


### Usuarios para Backup

- Es una practica que en las empresas se asigna un usuario que se dedique solo al backup

```sql
    -- CREAR EL USUARIO BACKUP
   CREATE USER 'BACK01'@'LOCALHOST' IDENTIFIED BY 'BACK01';

   -- HABILITAR PRIVILEGIOS BACKUP
   GRANT    SELECT, 
            RELOAD,
            LOCK TABLES,
            REPLICATION CLIENT
   ON *.* TO 'BACK01'@'LOCALHOST';
```
